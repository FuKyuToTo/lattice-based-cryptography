var P1=[
//0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
0,1,1,
1,1,0,1,
0,1,1,0,
1,0,1,0,1,
0,1,0,1,0,
0,1,0,0,0,
1,0,1,1,1,1,
0,1,0,1,0,0,
0,0,0,1,0,0,
0,1,1,0,0,1,
1,0,0,1,1,1,1,
0,0,0,0,0,1,1,
0,0,1,1,0,0,0,
0,0,0,0,0,1,0,
1,0,1,1,1,0,0,1,
0,1,1,0,0,0,0,0,
0,0,0,0,0,0,0,0,
0,1,1,1,1,1,0,0,
0,1,0,1,1,0,0,0,
0,1,0,0,0,1,0,1,
1,0,1,0,0,0,0,0,1,
0,1,1,0,0,0,1,0,1,
0,0,0,1,0,1,1,1,0,
0,1,1,1,0,0,0,0,0,
0,1,0,1,1,1,0,1,1,
0,0,0,0,0,1,1,0,1,
1,0,1,0,1,1,1,1,1,1,
0,0,0,0,1,0,0,0,0,0,
0,1,0,0,1,0,0,1,1,1,
0,0,1,1,0,0,1,1,1,1,
0,1,0,0,0,1,1,0,1,0,
0,0,0,0,0,0,0,1,1,1,
0,0,1,0,1,0,0,1,1,1,
1,1,1,1,0,1,0,1,0,0,1,
0,0,1,0,0,0,1,0,0,0,0,
0,0,0,1,1,0,1,1,1,1,1,
0,0,1,0,0,0,1,1,1,0,1,
0,1,1,1,0,1,0,1,0,1,0,
0,1,1,0,0,0,0,0,0,1,1,
0,1,0,0,0,0,0,1,1,0,0,
0,1,0,0,1,0,0,1,0,0,1,
1,1,1,0,1,1,1,0,0,1,0,1,
0,0,1,0,1,0,0,0,0,0,1,1,
0,1,0,1,0,1,0,0,0,1,1,0,
0,1,1,1,0,0,1,1,0,1,1,0,
0,1,0,1,1,1,0,1,1,0,0,1,
0,1,0,1,1,1,1,1,1,1,0,0,
0,0,1,1,1,0,0,1,0,0,1,1,
0,1,0,1,0,1,1,0,0,0,1,1,
1,0,1,0,0,0,1,0,0,1,1,1,1,
0,1,1,0,0,1,0,1,1,0,0,1,0,
0,0,0,1,0,1,1,0,0,0,1,1,0,
0,1,1,1,1,0,1,1,1,1,0,0,0,
0,1,1,0,0,0,0,1,1,0,1,1,0,
0,1,0,1,1,0,1,0,0,1,0,1,0,
0,0,1,0,1,1,0,1,1,0,0,1,0,
0,1,0,0,0,0,1,0,1,1,0,1,1,
0,0,1,0,0,1,1,0,1,0,1,0,0,
0,1,1,1,0,1,0,0,1,1,1,0,1,
1,0,1,0,0,1,0,0,1,0,1,0,1,1,
0,0,0,0,1,0,1,0,0,0,1,1,0,0,
0,1,1,1,1,1,1,0,0,0,0,0,1,1,
0,1,1,1,1,1,0,0,1,1,0,0,1,1,
0,1,1,0,0,1,0,1,0,0,0,1,1,1,
0,0,1,0,1,1,0,0,0,1,1,1,1,0,
0,0,1,0,0,0,1,1,1,1,1,0,1,0,
0,0,0,1,1,1,1,0,1,0,1,0,1,1,
0,0,1,0,0,1,1,1,0,0,0,0,0,1,
0,1,0,1,0,0,0,1,0,1,1,0,1,0,
1,1,0,1,0,1,0,1,1,0,0,1,1,0,1,
0,0,1,1,1,1,1,0,1,0,0,1,1,1,0,
0,0,0,0,1,0,1,1,1,0,1,1,0,0,0,
0,1,0,0,0,0,0,1,1,1,1,1,1,1,1,
0,1,1,1,0,0,1,0,1,0,0,1,1,0,0,
0,1,1,0,0,1,0,1,0,1,0,0,1,0,1,
0,0,0,1,1,0,1,1,1,1,0,0,1,0,1,
0,1,1,1,0,0,1,1,0,0,1,0,0,0,0,
0,1,0,1,0,0,1,0,0,0,1,1,0,1,0,
0,1,0,0,1,0,1,0,0,0,0,1,0,0,1,
0,1,0,1,0,0,1,1,1,1,1,0,0,0,0,
1,0,0,0,1,1,1,0,1,0,0,1,1,1,0,1,
0,0,0,0,0,0,1,0,1,1,0,1,0,1,0,0,
0,0,1,1,1,0,0,1,0,1,0,0,0,1,0,0,
0,1,1,1,1,1,0,1,0,0,1,0,0,1,1,0,
0,1,1,1,0,1,0,0,1,0,0,0,1,0,0,1,
0,1,1,1,0,0,0,1,0,0,1,0,1,0,0,0,
0,1,0,1,0,1,0,0,1,1,1,0,1,1,0,0,
0,0,1,0,1,0,1,1,0,0,1,1,1,1,1,1,
0,1,0,1,0,0,1,1,0,0,1,0,0,0,0,0,
0,0,1,0,1,0,1,0,0,0,0,1,0,0,1,1,
0,0,1,0,1,1,0,1,1,1,0,1,1,0,0,1,
0,0,0,0,1,0,0,1,1,0,1,0,1,1,0,0,
1,0,1,1,1,0,0,1,0,1,0,0,0,1,1,1,1,
0,0,1,0,1,0,1,1,0,1,0,1,0,1,0,0,0,
0,1,1,0,1,0,0,0,1,1,0,0,1,0,1,0,0,
0,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,
0,1,1,1,0,0,0,1,0,1,1,0,1,1,0,0,1,
0,1,0,1,1,0,1,1,0,0,1,1,1,1,0,0,1,
0,1,1,0,1,1,0,0,0,0,0,1,1,1,0,1,0,
0,1,1,1,0,0,0,0,0,1,0,1,0,0,1,0,1,
0,1,0,1,0,0,1,1,1,1,1,0,0,0,1,0,1,
0,0,1,1,0,1,0,1,1,1,0,0,0,0,1,0,1,
0,1,0,0,1,0,1,1,0,1,0,0,1,1,1,0,1
];
//	--------------------------------------------------------------------------------------
	
function knuthyao(){
	var d=0, r=0, row=0, length=2, sum=0;
	r=Math.floor(Math.random() * 2);
	d=(d<<1)+1-r;	//d=2*d+1-r;
		while(true){
			r=Math.floor(Math.random() * 2); 
			d=(d<<1)+1-r; 	//d=2*d+1-r;
 	          for(row=length-1;row>=0;row--){
 	        	  d-=P1[row+1+sum];
 	           if(d==-1){
 		          if(row==0){
 			        if(Math.floor(Math.random() * 2)==1){
					return row;			        	
 			        }
 			        else{
 			        length=2;sum=-3;  
 				    d=0;              
 				   r=Math.floor(Math.random() * 2); 
				  d=(d<<1)+1-r;  //d=2*d+1-r;
 				    continue;
 			        }
 		         }
 		         else{				
		            if(Math.floor(Math.random() *2)==0){						
						return -1*row;
					}
					else{
						return row;
					}		
 		         }
		         } 
             }
 	          sum+=1+length; 	 
 	          if(P1[sum]==1){
 	        	  length++;
 	          }	
		}
		return s;
};

function testky(){
	var start = 0.0, end = 0.0, s=new Array(752);
for(var i=0;i<752;i++){
	s[i]=new Array(8);
}
		start = new Date().getTime();	
		for(var m=0,lenm=s.length;m<lenm;m++){
		for(var n=0,lenn=s[m].length;n<lenn;n++){
			s[m][n]=knuthyao();
		}
		}		 
			 end = new Date().getTime();	
			 print('frodo ky done, cost ' + parseFloat(end - start))  + 'ms.');	
	};
	
//	--------------------------------------------------------------------------------------
	function print(message) {
		//WScript.Echo(message); //for WSH
		console.log(message);
	}
	testky();
//	--------------------------------------------------------------------------------------

	



